<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Assigned Complaints - Admin</title>
  <link rel="stylesheet" href="../css/adminunassignedcomplaints.css" />
</head>
<body>
  <header>
    <h1>Assigned Complaints</h1>
    <button class="logout-btn" onclick="logout()">Logout</button>
    <nav><a href="admindashboard.html">⬅️ Back to Dashboard</a></nav>
  </header>

  <main>
    <!-- Filters -->
    <section class="filters">
      <label for="filterCategory">Category:</label>
      <select id="filterCategory">
        <option value="">-- All Categories --</option>
        <option value="Facilities">Facilities</option>
        <option value="Technical Support">Technical Support</option>
        <option value="Academic Issues">Academic Issues</option>
        <option value="Administrative">Administrative</option>
        <option value="Harassment/Bullying">Harassment/Bullying</option>
        <option value="Other">Other</option>
      </select>

      <label for="fromDate">From:</label>
      <input type="date" id="fromDate" />

      <label for="toDate">To:</label>
      <input type="date" id="toDate" />

      <button onclick="applyFilter()">Apply Filter</button>
      
    </section>

    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>Category</th>
          <th>Description</th>
          <th>Assigned Staff</th>
          <th>Date Assigned</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody id="assignedComplaintsBody">
        <!-- JS will populate complaints here -->
      </tbody>
    </table>
  </main>

  <footer>
    <p>&copy; <span id="year"></span> Digital Complaint & Maintenance System</p>
  </footer>
  
  <!-- Modal Popup -->
  <div id="complaintModal" class="modal">
    <div class="modal-content">
      <span id="modalClose" class="modal-close">&times;</span>
      <div class="modal-header">Complaint Details</div>
      <div class="modal-body">
        <div class="modal-field"><strong>ID:</strong> <span id="modalId"></span></div>
        <div class="modal-field"><strong>Category:</strong> <span id="modalCategory"></span></div>
        <div class="modal-field"><strong>Description:</strong> <span id="modalDescription"></span></div>
        <div class="modal-field"><strong>Assigned Staff:</strong> <span id="modalStaff"></span></div>
        <div class="modal-field"><strong>Date Assigned:</strong> <span id="modalAssignDate"></span></div>
        <div class="modal-field"><strong>Status:</strong> <span id="modalStatus"></span></div>
      </div>
    </div>
  </div>

  <script>
    document.getElementById("year").textContent = new Date().getFullYear();

    // Logout function
    function logout() {
      // Clear session data
      localStorage.removeItem('auth');
      
      // Redirect to login page
      window.location.href = '../../index/html/login.html';
    }
  </script>

  <script src="../js/adminassignedcomplaints.js"></script>
</body>
</html>